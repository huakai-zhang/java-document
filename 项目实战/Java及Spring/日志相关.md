# 1 logback 指定配置文件

一般测试环境适用

```properties
# 版本不同写法不同
-Dlogback.configurationFile=file:E:\gitignore\csc-logback\logback.xml
```

2 log4j2 不生效

1.  **确保依赖正确**：

在`pom.xml`中，确保你有以下的依赖：

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-log4j2</artifactId>
</dependency>

```

请注意，如果你在使用Spring Boot的默认日志系统（例如Logback），则需要排除它：

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <exclusions>
        <exclusion>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-logging</artifactId>
        </exclusion>
    </exclusions>
</dependency>

```

1.  **配置文件位置**：

确保`log4j2-spring.xml`或`log4j2.xml`（如果使用其他名称）位于`src/main/resources`目录下。Spring Boot会自动检测并加载此配置。\
3. **配置文件内容**：

确保你的`log4j2-spring.xml`内容是正确的。一个简单的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
        </Console>
    </Appenders>
    <Loggers>
        <Root level="info">
            <AppenderRef ref="Console"/>
        </Root>
    </Loggers>
</Configuration>

```

1.  **应用程序属性**：

在`application.properties`或`application.yml`中，确保没有与Log4j2相关的配置，因为这可能会覆盖你的XML配置。特别是检查像这样的属性：`logging.level.*`。\
5. **排除其他日志系统**：

确保没有其他日志系统（如Logback或Log4j）在类路径上，这可能会导致冲突。你可以使用Maven的`mvn dependency:tree`命令来检查项目的依赖关系。\
6. **版本兼容性**：

确保你使用的Log4j2版本与Spring Boot版本兼容。有时，新版本的Spring Boot可能与旧版本的Log4j2不完全兼容。查看Spring Boot的官方文档或发布说明以获取推荐的Log4j2版本。

---
layout:  post
title:   Javaæ ¸å¿ƒæŠ€æœ¯ å›½é™…åŒ–
date:   2020-01-04 17:44:57
author:  'zhangtao'
header-img: 'img/post-bg-2015.jpg'
catalog:   false
tags:
-Javaæ ¸å¿ƒæŠ€æœ¯

---






å¯¹äºæ—¥æœŸã€æ•°å­—ç­‰çš„æ˜¾ç¤ºä¸åŒå›½å®¶æœ‰ä¸åŒï¼Œåˆè‹¥å¹²ä¸ªä¸“é—¨è´Ÿè´£æ ¼å¼å¤„ç†çš„ç±»ã€‚ä¸ºäº†å¯¹æ ¼å¼åŒ–è¿›è¡Œæ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨Localeç±»ã€‚ localeç”±å¤šè¾¾5ä¸ªéƒ¨åˆ†æ„æˆï¼š 1.ä¸€ç§è¯­è¨€ï¼Œç”±2ä¸ªæˆ–3ä¸ªå°å†™å­—æ¯è¡¨ç¤ºï¼š ![img](https://img-blog.csdnimg.cn/20200103131219193.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzemN5MTk5NTAz,size_16,color_FFFFFF,t_70) 2.å¯é€‰çš„ä¸€æ®µè„šæœ¬ï¼Œç”±é¦–å­—æ¯å¤§å†™çš„å››ä¸ªå­—æ¯è¡¨ç¤ºã€‚ä¾‹å¦‚Hant(ç¹ä½“ä¸­æ–‡å­—ç¬¦) 3.å¯é€‰çš„ä¸€ä¸ªå›½å®¶æˆ–åœ°åŒºï¼Œç”±2ä¸ªå¤§å†™å­—æ¯æˆ–3ä¸ªæ•°å­—è¡¨ç¤ºï¼Œä¾‹å¦‚US(ç¾å›½) ![img](https://img-blog.csdnimg.cn/20200103132304925.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzemN5MTk5NTAz,size_16,color_FFFFFF,t_70) 4.å¯é€‰çš„ä¸€ä¸ªå˜ä½“ï¼Œç”¨äºæŒ‡å®šå„ç§æ‚é¡¹ç‰¹æ€§ï¼Œä¾‹å¦‚æ–¹è¨€å’Œæ‹¼å†™è§„åˆ™ 5.å¯é€‰çš„ä¸€ä¸ªæ‰©å±•ï¼Œæ‰©å±•æè¿°äº†æ—¥å†å’Œæ•°å­—ç­‰å†…å®¹çš„æœ¬åœ°åå¥½ã€‚ä¾‹å¦‚ï¼Œu-nu-thaiè¡¨ç¤ºä½¿ç”¨æ³°è¯­æ•°å­—ã€‚ localeçš„è§„åˆ™åœ¨Internet Engineering Task Forceçš„ [â€œBest Current Practicesâ€å¤‡å¿˜å½•BCP47](https://tools.ietf.org/html/bcp47)è¿›è¡Œäº†æ˜ç¡®é˜è¿°ã€‚ä¹Ÿå¯ä»¥åœ¨ [https://www.w3.org/International/articles/language-tags/](https://www.w3.org/International/articles/language-tags/)å¤„æ‰¾åˆ°æ›´å®¹æ˜“çš„ç†è§£æ€»ç»“ã€‚

```java
// å¯ä»¥ä½¿ç”¨æ ‡ç­¾å­—ç¬¦ä¸²æ¥æ„å»ºLocaleå¯¹è±¡
Locale usEnglish = Locale.forLanguageTag("en-US");
toLanguageTagæ–¹æ³•å¯ä»¥ç”Ÿæˆç»™å®šçš„Localeè¯­è¨€æ ‡ç­¾
System.out.println(Locale.US.toLanguageTag());
```

Java SEä¸ºå„ä¸ªå›½å®¶é¢„å®šä¹‰äº†Localeå¯¹è±¡ï¼Œè¿˜é¢„å®šä¹‰äº†å¤§é‡çš„è¯­è¨€Localeï¼Œå®ƒä»¬åªè®¾å®šäº†è¯­è¨€è€Œæ²¡æœ‰è®¾å®šä½ç½®ï¼š

```java
static public final Locale CHINESE = createConstant("zh", "");
```

é™æ€æ–¹æ³•getAvailableLocales()è¿”å›ç”±Javaè™šæ‹Ÿæœºæ‰€èƒ½å¤Ÿè¯†åˆ«çš„æ‰€æœ‰Localeæ„æˆçš„æ•°ç»„ã€‚ é™¤äº†æ„å»ºLocaleæˆ–ä½¿ç”¨é¢„å®šä¹‰Localeå¤–ï¼Œå¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•è·å¾—Localeå¯¹è±¡ï¼Œé™æ€getDefaultæ–¹æ³•å¯ä»¥è·å¾—ä½œä¸ºæœ¬åœ°æ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†è€Œå­˜æ”¾çš„Localeã€‚å¯ä»¥è°ƒç”¨setDefaultæ–¹æ³•æ”¹å˜é»˜è®¤JavaLocaleï¼Œä½†æ˜¯è¿™ç§æ”¹å˜åªå¯¹ç¨‹åºæœ‰æ•ˆï¼Œå¯¹æ“ä½œç³»ç»Ÿä¸ä¼šäº§ç”Ÿå½±å“ã€‚ å¯¹äºæ‰€æœ‰çš„Localeç›¸å…³çš„å·¥å…·ç±»ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªä»–ä»¬æ‰€æ”¯æŒçš„Localeæ•°ç»„ï¼š

```java
// è¿”å›æ‰€æœ‰NumberFormatæ‰€èƒ½å¤„ç†çš„Locale
NumberFormat.getAvailableLocales();
```

Localeç±»ä¸­å”¯ä¸€æœ‰ç”¨çš„æ˜¯é‚£äº›è¯†åˆ«è¯­è¨€å’Œå›½å®¶ä»£ç çš„æ–¹æ³•ï¼Œæ¯”å¦‚getDisplayNameï¼Œå®ƒè¿”å›ä¸€ä¸ªæè¿°Localeçš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²å¹¶ä¸åŒ…æ‹¬å‰é¢æ‰€è¯´çš„ç”±ä¸¤ä¸ªå­—æ¯ç»„æˆçš„ä»£ç ï¼Œè€Œæ˜¯ä»¥ä¸€ç§é¢å‘ç”¨æˆ·çš„å½¢å¼ä½“ç°ã€‚

```java
Locale loc = new Locale("de", "CH");
System.out.println(loc.getDisplayName(Locale.GERMAN));
// Deutsch (Schweiz)
```


Javaç±»åº“æä¾›äº†ä¸€ä¸ªæ ¼å¼å™¨ï¼ˆformatterï¼‰å¯¹è±¡çš„é›†åˆï¼Œå¯ä»¥å¯¹java.textåŒ…ä¸­çš„æ•°å­—å€¼è¿›è¡Œæ ¼å¼åŒ–å’Œè§£æã€‚å¯ä»¥é€šè¿‡ä¸‹é¢æ­¥éª¤å¯¹ç‰¹å®šLocaleçš„æ•°å­—è¿›è¡Œæ ¼å¼åŒ–ï¼š 1.ä½¿ç”¨ä¸Šä¸€èŠ‚çš„æ–¹æ³•ï¼Œå¾—åˆ°Localeå¯¹è±¡ 2.ä½¿ç”¨ä¸€ä¸ªå·¥å‚æ–¹æ³•å¾—åˆ°ä¸€ä¸ªæ ¼å¼å™¨å¯¹è±¡ 3.ä½¿ç”¨è¿™ä¸ªæ ¼å¼å™¨å¯¹è±¡æ¥å®Œæˆæ ¼å¼åŒ–å’Œè§£æå·¥ä½œ å·¥å‚æ–¹æ³•æ˜¯NumberFormatç±»çš„é™æ€æ–¹æ³•ï¼Œå®ƒä»¬æ¥å—ä¸€ä¸ªLocaleç±»å‹çš„å‚æ•°ã€‚æ€»å…±æœ‰3ä¸ªå·¥å‚æ–¹æ³•ï¼šgetNumberInstanceã€getCurrencyInstanceå’ŒgetPercentInstanceï¼Œè¿™äº›æ–¹æ³•è¿”å›å¯¹è±¡å¯ä»¥åˆ†åˆ«å¯¹æ•°å­—ã€è´§å¸é‡å’Œç™¾åˆ†æ¯”è¿›è¡Œæ ¼å¼åŒ–å’Œè§£æã€‚

```java
Locale loc = Locale.US;
NumberFormat currFmt = NumberFormat.getCurrencyInstance(loc);
double amt = 123456.78;
System.out.println(currFmt.format(amt));
// $123,456.78
```

ä½¿ç”¨parseæ–¹æ³•ï¼Œè¯»å–ä¸€ä¸ªæŒ‰ç…§æŸLocaleçš„æƒ¯ç”¨æ³•è€Œè¾“å…¥æˆ–å­˜å‚¨çš„æ•°å­—ã€‚parseçš„è¿”å›ç±»å‹æ˜¯æŠ½è±¡ç±»å‹çš„Numberã€‚è¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ªDoubleæˆ–Longçš„åŒ…è£…å™¨ç±»å¯¹è±¡ï¼Œè¿™å–å†³äºè§£æçš„æ•°å­—æ˜¯å¦æ˜¯æµ®ç‚¹æ•°ã€‚å¦‚æœä¸å…³å¿ƒå·®å¼‚ï¼Œç›´æ¥ä½¿ç”¨Numberç±»çš„doubleValueæ–¹æ³•æ¥è¯»å–è¢«åŒ…è£…çš„æ•°å­—ã€‚ å¦‚æœæ•°å­—æ–‡æœ¬çš„æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯¥æ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªParseExceptionå¼‚å¸¸ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ä»¥ç©ºç™½å­—ç¬¦å¼€å¤´ï¼ˆå¯ä»¥ç”¨trimæ–¹æ³•å»æ‰ï¼‰ã€‚ ç”±getXxxInstanceå·¥å‚æ–¹æ³•è¿”å›çš„ç±»å¹¶éæ˜¯NumberFormatç±»å‹ï¼ŒNumberFormatåªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®é™…å¾—åˆ°çš„æ˜¯å®ƒçš„å­ç±»ã€‚

```java
public class NumberFormatTest {
    public static void main(String[] args) {
        EventQueue.invokeLater(() -> {
            JFrame frame = new NumberFormatFrame();
            frame.setTitle("NumberFormatTest");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setVisible(true);
        });
    }
}

class NumberFormatFrame extends JFrame {
    private Locale[] locales;
    private double currentNumber;
    private JComboBox<String> localeCombo = new JComboBox<>();
    private JButton parseButton = new JButton("Parse");
    private JTextField numberText = new JTextField(30);
    private JRadioButton numberRadioButton = new JRadioButton("Number");
    private JRadioButton currencyRadioButton = new JRadioButton("Currency");
    private JRadioButton percentRadioButton = new JRadioButton("Percent");
    private ButtonGroup rbGroup = new ButtonGroup();
    private NumberFormat currentNumberFormat;

    public NumberFormatFrame() {
        setLayout(new GridBagLayout());

        ActionListener listener = event -> updateDisplay();

        JPanel p = new JPanel();
        addRadioButton(p, numberRadioButton, rbGroup, listener);
        addRadioButton(p, currencyRadioButton, rbGroup, listener);
        addRadioButton(p, percentRadioButton, rbGroup, listener);

        add(new JLabel("Locale:"), new GBC(0, 0).setAnchor(GBC.EAST));
        add(p, new GBC(1, 1));
        add(parseButton, new GBC(0, 2).setInsets(2));
        add(localeCombo, new GBC(1, 0).setAnchor(GBC.WEST));
        add(numberText, new GBC(1, 2).setFill(GBC.HORIZONTAL));

        locales = NumberFormat.getAvailableLocales().clone();
        Arrays.sort(locales, Comparator.comparing(Locale::getDisplayName));
        for (Locale loc : locales) {
            localeCombo.addItem(loc.getDisplayName());
        }
        localeCombo.setSelectedItem(Locale.getDefault().getDisplayName());
        currentNumber = 123456.78;
        updateDisplay();

        localeCombo.addActionListener(listener);

        parseButton.addActionListener(event -> {
            String s = numberText.getText().trim();
            try {
                Number n = currentNumberFormat.parse(s);
                if (n != null) {
                    currentNumber = n.doubleValue();
                    updateDisplay();
                } else {
                    numberText.setText("Parse error: " + s);
                }
            } catch (ParseException e) {

            }
        });
        pack();
    }

    public void addRadioButton(Container p, JRadioButton b, ButtonGroup g, ActionListener listener) {
        b.setSelected(g.getButtonCount() == 0);
        b.addActionListener(listener);
        g.add(b);
        p.add(b);
    }

    public void updateDisplay() {
        Locale currentLocale = locales[localeCombo.getSelectedIndex()];
        currentNumberFormat = null;
        if (numberRadioButton.isSelected()) {
            currentNumberFormat = NumberFormat.getNumberInstance(currentLocale);
        } else if (currencyRadioButton.isSelected()) {
            currentNumberFormat = NumberFormat.getCurrencyInstance(currentLocale);
        } else if (percentRadioButton.isSelected()) {
            currentNumberFormat = NumberFormat.getPercentInstance(currentLocale);
        }
        String formatted = currentNumberFormat.format(currentNumber);
        numberText.setText(formatted);
    }
}
```


![img](https://img-blog.csdnimg.cn/20200103165904335.png) GBCæºç å¯å‚è€ƒè‡ª [http://code1.okbase.net/codefile/GBC.java_2012113012759_291.htm](http://code1.okbase.net/codefile/GBC.java_2012113012759_291.htm)

```java
public class GBC extends GridBagConstraints {
    public GBC(int gridx, int gridy){
        this.gridx = gridx;
        this.gridy = gridy;
    }
    public GBC(int gridx, int gridy, int gridwidth, int gridheight){
        this.gridx = gridx;
        this.gridy = gridy;
        this.gridwidth = gridwidth;
        this.gridheight = gridheight;
    }
    public GBC setAnchor(int anchor){
        this.anchor = anchor;
        return this;
    }
    public GBC setFill(int fill){
        this.fill = fill;
        return this;
    }
    public GBC setWeight(double weightx, double weighty){
        this.weightx = weightx;
        this.weighty = weighty;
        return this;
    }
    public GBC setInsets(int distance){
        this.insets = new Insets(distance, distance, distance, distance);
        return this;
    }
    public GBC setInsets(int top, int left, int bottom, int right){
        this.insets = new Insets(top, left, bottom, right);
        return this;
    }
    public GBC setIpad(int ipadx, int ipady){
        this.ipadx = ipadx;
        this.ipady = ipady;
        return this;
    }
}
```


NumberFormat.getCurrencyInstanceæ–¹æ³•çµæ´»æ€§ä¸å¥½ï¼Œå®ƒè¿”å›çš„æŒ‡ç¤ºé’ˆå¯¹ä¸€ç§è´§å¸çš„æ ¼å¼å™¨ã€‚ æ¯”å¦‚ä¸ºç¾å›½å®¢æˆ·è®¾ç½®æ¬§å…ƒæ ¼å¼ï¼Œä¸èƒ½å»åˆ›å»ºä¸¤ä¸ªæ ¼å¼å™¨ï¼Œåº”è¯¥ä½¿ç”¨Currencyç±»æ¥æ§åˆ¶è¢«æ ¼å¼å™¨æ‰€å¤„ç†çš„è´§å¸ã€‚é€šè¿‡å°†ä¸€ç§è´§å¸æ ‡è¯†ç¬¦ä¼ ç»™é™æ€çš„Currency.getInstanceæ–¹æ³•æ¥å¾—åˆ°ä¸€ä¸ªCurrencyå¯¹è±¡ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªæ ¼å¼å™¨éƒ½è°ƒç”¨setCurrencyæ–¹æ³•ï¼š

```java
NumberFormat euroFormatter = NumberFormat.getCurrencyInstance(Locale.US);
euroFormatter.setCurrency(Currency.getInstance("EUR"));
```


è´§å¸æ ‡è¯†ç¬¦æœ‰ISO 4217å®šä¹‰ï¼š ![img](https://img-blog.csdnimg.cn/20200103164845154.png)



java.timeåŒ…ä¸­çš„DateTimeFormatterç±»ï¼Œè€Œéjava1.1é—ç•™çš„java.text.DateTimeFormatter(å¯ä»¥æ“ä½œDateå’ŒCalendar)ï¼š ![img](https://img-blog.csdnimg.cn/20200103170123989.png)

```java
// ä½¿ç”¨å½“å‰Locale
DateTimeFormatter dateFormatter = DateTimeFormatter.ofLocalizedDate(style).withLocale(locale);
// å¯ä»¥æ ¼å¼åŒ–LocalDateã€LocalDateTimeã€LocalTimeã€ZonedDateTime
ZonedDateTime appointment = ...;
String formatted = formatter.format(appointment);
```

å¯ä»¥ä½¿ç”¨LocalDateã€LocalDateTimeã€LocalTimeã€ZonedDateTimeçš„é™æ€çš„parseæ–¹æ³•æ¥è§£æå­—ç¬¦ä¸²ä¸­çš„æ—¶é—´å’Œæ—¥æœŸï¼š

```java
LocalTime time = LocalTime.parse("9:32 AM", formatter);
```

è¿™äº›æ–¹æ³•ä¸é€‚åˆè§£æäººç±»è¾“å…¥ï¼Œå› ä¸ºå®ƒè§£æä¸äº†9:32AMå’Œ9:32 amã€‚ æ—¥æœŸæ ¼å¼å™¨å¯ä»¥è§£æä¸å­˜åœ¨çš„æ—¥æœŸï¼Œå¦‚November 31ï¼Œå®ƒä¼šå°†æ—¥æœŸè°ƒæ•´ä¸ºç»™å®šæœˆçš„æœ€åä¸€å¤©ã€‚

æœ‰æ—¶å€™éœ€è¦æ˜¾ç¤ºæ˜ŸæœŸå’Œæœˆä»½çš„åå­—ï¼Œå¯è°ƒç”¨DayOfWeekå’ŒMonthæšä¸¾çš„getDisplayNameï¼š

```java
for (Month m : Month.values()) {
    System.out.println(m.getDisplayName(TextStyle.FULL, Locale.CHINA) + " ");
}
for (DayOfWeek d : DayOfWeek.values()) {
	System.out.println(d.getDisplayName(TextStyle.FULL, Locale.CHINA+ " ");
}
```


![img](https://img-blog.csdnimg.cn/20200103171254990.png) STANDALONEç‰ˆæœ¬ç”¨äºæ ¼å¼åŒ–æ—¥æœŸä¹‹å¤–çš„æ˜¾ç¤ºã€‚ä¾‹å¦‚èŠ¬å…°è¯­ä¸­ï¼Œä¸€æœˆåœ¨æ—¥æœŸä¸­æ˜¯â€œtammikuutaâ€ï¼Œä½†æ˜¯å•ç‹¬æ˜¾ç¤ºæ˜¯â€œtammikuuâ€ã€‚ æ˜ŸæœŸçš„ç¬¬ä¸€å¤©å¯ä»¥æ˜¯æ˜ŸæœŸå…­ã€æ˜ŸæœŸæ—¥æˆ–æ˜ŸæœŸä¸€ï¼Œè¿™å–å†³äºLocaleï¼š

```java
DayOfWeek first = WeekFields.of(Locale.CHINA).getFirstDayOfWeek();
```

```java
public class DateFormatTest {
    public static void main(String[] args) {
        EventQueue.invokeLater(() -> {
            JFrame frame = new DateTimeFormatterFrame();
            frame.setTitle("DateFormatTest");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setVisible(true);
        });
    }
}
class DateTimeFormatterFrame extends JFrame {
    private Locale[] locales;
    private LocalDate currentDate;
    private LocalTime currentTime;
    private ZonedDateTime currentDateTime;
    private DateTimeFormatter currentDateFormat;
    private DateTimeFormatter currentTimeFormat;
    private DateTimeFormatter currentDateTimeFormat;
    private JComboBox<String> localeCombo = new JComboBox<>();
    private JButton dateParseButton = new JButton("Parse");
    private JButton timeParseButton = new JButton("Parse");
    private JButton dateTimeParseButton = new JButton("Parse");
    private JTextField dateText = new JTextField(30);
    private JTextField timeText = new JTextField(30);
    private JTextField dateTimeText = new JTextField(30);
    private EnumCombo<FormatStyle> dateStyleCombo = new EnumCombo<>(FormatStyle.class, "Short", "Medium", "Long", "Full");
    private EnumCombo<FormatStyle> timeStyleCombo = new EnumCombo<>(FormatStyle.class, "Short", "Medium");
    private EnumCombo<FormatStyle> dateTimeStyleCombo = new EnumCombo<>(FormatStyle.class, "Short", "Medium", "Long", "Full");
    public DateTimeFormatterFrame() {
        setLayout(new GridBagLayout());
        add(new JLabel("Locale"), new GBC(0,0).setAnchor(GBC.EAST));
        add(localeCombo, new GBC(1, 0, 2, 1).setAnchor(GBC.WEST));
        add(new JLabel("Date"), new GBC(0,1).setAnchor(GBC.EAST));
        add(dateStyleCombo, new GBC(1, 1).setAnchor(GBC.WEST));
        add(dateText, new GBC(2, 1, 2,1).setFill(GBC.HORIZONTAL));
        add(dateParseButton, new GBC(4, 1).setAnchor(GBC.WEST));
        add(new JLabel("Time"), new GBC(0,2).setAnchor(GBC.EAST));
        add(timeStyleCombo, new GBC(1, 2).setAnchor(GBC.WEST));
        add(timeText, new GBC(2, 2, 2,1).setFill(GBC.HORIZONTAL));
        add(timeParseButton, new GBC(4, 2).setAnchor(GBC.WEST));
        add(new JLabel("Date and Time"), new GBC(0,3).setAnchor(GBC.EAST));
        add(dateTimeStyleCombo, new GBC(1, 3).setAnchor(GBC.WEST));
        add(dateTimeText, new GBC(2, 3, 2,1).setFill(GBC.HORIZONTAL));
        add(dateTimeParseButton, new GBC(4, 3).setAnchor(GBC.WEST));
        locales = Locale.getAvailableLocales().clone();
        Arrays.sort(locales, Comparator.comparing(Locale::getDisplayName));
        for (Locale loc : locales) {
            localeCombo.addItem(loc.getDisplayName());
        }
        localeCombo.setSelectedItem(Locale.getDefault().getDisplayName());
        currentDate = LocalDate.now();
        currentTime = LocalTime.now();
        currentDateTime = ZonedDateTime.now();
        updateDisplay();
        ActionListener listener = event -> updateDisplay();
        localeCombo.addActionListener(listener);
        dateStyleCombo.addActionListener(listener);
        timeStyleCombo.addActionListener(listener);
        dateTimeStyleCombo.addActionListener(listener);
        dateParseButton.addActionListener(event -> {
            String d = dateText.getText().trim();
            try {
                currentDate = LocalDate.parse(d, currentDateFormat);
                updateDisplay();
            } catch (Exception e) {
                dateText.setText(e.getMessage());
            }
        });
        timeParseButton.addActionListener(event -> {
            String t = timeText.getText().trim();
            try {
                currentTime = LocalTime.parse(t, currentTimeFormat);
                updateDisplay();
            } catch (Exception e) {
                timeText.setText(e.getMessage());
            }
        });
        dateTimeParseButton.addActionListener(event -> {
            String t = dateTimeText.getText().trim();
            try {
                currentDateTime = ZonedDateTime.parse(t, currentDateTimeFormat);
                updateDisplay();
            } catch (Exception e) {
                dateTimeText.setText(e.getMessage());
            }
        });
        pack();
    }
    public void updateDisplay() {
        Locale currentLocale = locales[localeCombo.getSelectedIndex()];
        FormatStyle dateStyle = dateStyleCombo.getValue();
        currentDateFormat = DateTimeFormatter.ofLocalizedDate(
                dateStyle).withLocale(currentLocale);
        dateText.setText(currentDateFormat.format(currentDate));
        FormatStyle timeStyle = timeStyleCombo.getValue();
        currentTimeFormat = DateTimeFormatter.ofLocalizedTime(
                timeStyle).withLocale(currentLocale);
        timeText.setText(currentTimeFormat.format(currentTime));
        FormatStyle dateTimeStyle = dateTimeStyleCombo.getValue();
        currentDateTimeFormat = DateTimeFormatter.ofLocalizedDateTime(
                dateTimeStyle).withLocale(currentLocale);
        dateTimeText.setText(currentDateTimeFormat.format(currentDateTime));
    }
}
```


![img](https://img-blog.csdnimg.cn/20200104105631178.png) è¾…åŠ©ç±»EnumComboç±»ï¼Œç”¨Shortã€Mediumå’ŒLongç­‰å€¼æ¥å¡«å……ä¸€ä¸ªç»„åˆæ¡†ï¼ˆcomboï¼‰ï¼Œç„¶åè‡ªåŠ¨å°†ç”¨æˆ·çš„é€‰æ‹©è½¬æ¢æˆæ•´æ•°å€¼DateFormat.SHORTã€DateFormat.MEDIUMã€DateFormat.LONGã€‚å¹¶æ²¡æœ‰ç¼–å†™é‡å¤çš„ä»£ç ï¼Œè€Œæ˜¯ä½¿ç”¨äº†åå°„ï¼šå°†ç”¨æˆ·çš„é€‰æ‹©è½¬æ¢æˆå¤§å†™å­—æ¯ï¼Œæ‰€æœ‰ç©ºæ ¼éƒ½æ›¿æ¢æˆä¸‹åˆ’çº¿ï¼Œç„¶åæ‰¾åˆ°ä½¿ç”¨è¿™ä¸ªåå­—çš„é™æ€åŸŸçš„å€¼ã€‚

```java
public class EnumCombo<T> extends JComboBox<String> {
    private Map<String, T> table = new TreeMap<>();
    public EnumCombo(Class<?> cl, String... labels) {
        for (String label : labels) {
            String name = label.toUpperCase().replaceAll(" ", "_");
            try {
                java.lang.reflect.Field f = cl.getField(name);
                @SuppressWarnings("unchecked") T value = (T) f.get(cl);
                table.put(label, value);
            } catch (Exception e) {
                label = "(" + label + ")";
                table.put(label, null);
            }
            addItem(label);
        }
        setSelectedItem(labels[0]);
    }
    public T getValue() {
        return table.get(getSelectedItem());
    }
}
```


ä½¿ç”¨Stringç±»ä¸­çš„compareToæ–¹æ³•å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œä½†compareToæ–¹æ³•ä½¿ç”¨çš„æ˜¯å­—ç¬¦ä¸²çš„UTF-16ç¼–ç ï¼Œå³ä½¿åœ¨è‹±æ–‡æ¯”è¾ƒä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ å¯¹äºä¸‹é¢çš„5ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ’åºçš„ç»“æœä¸ºAmericaã€Zuluã€ableã€zebraã€Ã…ngstromï¼Œå¯¹äºè‹±è¯­è¯»è€…æ¥è¯´æœŸæœ›å¤§å°å†™æ˜¯ç­‰ä»·æ’åºæ˜¯ï¼šableã€Americaã€Ã…ngstromã€zebraã€Zuluï¼Œä½†æ˜¯å¯¹äºç‘å…¸ç”¨æˆ·å­—æ¯Ã…å’Œå­—æ¯Aæ˜¯ä¸åŒçš„ï¼Œå®ƒåº”è¯¥æ’åœ¨å­—æ¯Zä¹‹åï¼šableã€Americaã€zebraã€Zuluã€Ã…ngstromã€‚ ä¸ºäº†è·å¾—Localeæ•æ„Ÿçš„æ¯”è¾ƒç¬¦ï¼Œå¯ä»¥è°ƒç”¨é™æ€Collator.getInstanceæ–¹æ³•ï¼š

```java
Collator coll = Collator.getInstance(Locale.getDefault());
words.sort(coll);
```



å› ä¸ºCollatorç±»å®ç°äº†Comparatoræ¥å£ï¼Œå› æ­¤å¯ä»¥ä¼ é€’ä¸€ä¸ªCollatorå¯¹è±¡ç»™list.sort(Comparator)æ–¹æ³•æ¥å¯¹ä¸€ç»„å­—ç¬¦ä¸²è¿›è¡Œæ’åºã€‚ æ’åºå™¨æœ‰å‡ ä¸ªé«˜çº§è®¾ç½®é¡¹ã€‚å­—ç¬¦é—´çš„å·®åˆ«å¯ä»¥è¢«åˆ†ä¸ºé¦–è¦çš„ï¼ˆprimaryï¼‰ã€å…¶æ¬¡çš„ï¼ˆsecondaryï¼‰å’Œå†æ¬¡çš„ï¼ˆtertiaryï¼‰ã€‚æ¯”å¦‚è‹±è¯­ä¸­ï¼ŒAå’ŒZä¹‹é—´çš„å·®åˆ«æ˜¯é¦–è¦çš„ï¼ŒAå’ŒÃ…ä¹‹é—´å·®åˆ«æ˜¯å…¶æ¬¡çš„ï¼ŒAå’Œaä¹‹é—´æ˜¯å†æ¬¡çš„ã€‚ å¦‚æœæ’åºå™¨çš„å¼ºåº¦è®¾ç½®æˆCollator.PRIMARYï¼Œé‚£ä¹ˆæ’åºå™¨å°†åªå…³æ³¨primaryçº§çš„å·®åˆ«ã€‚å¦‚æœè®¾ç½®æˆCollator.SECONDARYï¼Œæ’åºå™¨å°†æŠŠsecondaryçº§çš„å·®åˆ«ä¹Ÿè€ƒè™‘è¿›å»ã€‚ ![img](https://img-blog.csdnimg.cn/20200104114703930.png) å¦‚æœå¼ºåº¦è¢«è®¾ç½®ä¸ºCollator.IDENTICALï¼Œåˆ™ä¸å…è®¸æœ‰ä»»ä½•å·®å¼‚ã€‚è¿™ç§è®¾ç½®åœ¨ä¸æ’åºå™¨çš„ç¬¬äºŒç§å…·æœ‰ç›¸å½“æŠ€æœ¯æ€§çš„è®¾ç½®ï¼Œå³åˆ†è§£æ¨¡å¼ï¼ˆdecomposition modeï¼‰ï¼Œè”åˆä½¿ç”¨æ—¶ï¼Œå°±ä¼šéå¸¸æœ‰ç”¨ã€‚ Ã…å¯ä»¥æ˜¯Unicodeå­—ç¬¦U+00C5ï¼Œæˆ–è€…è¡¨ç¤ºæˆæ™®é€šçš„Aï¼ˆU+0065ï¼‰åè·ŸÂ°ï¼ˆä¸Šæ–¹ç»„åˆç¯ï¼ŒU+030Aï¼‰ã€‚Unicodeæ ‡å‡†å¯¹å­—ç¬¦ä¸²å®šä¹‰äº†å››ç§èŒƒåŒ–å½¢å¼ï¼ˆnormalization formï¼‰ğŸ˜„ã€KDã€Cå’ŒKCã€‚åœ¨èŒƒåŒ–å½¢å¼Cä¸­ï¼Œé‡éŸ³ç¬¦å·æ€»æ˜¯ç»„åˆçš„ã€‚åœ¨èŒƒåŒ–å½¢å¼Dä¸­ï¼Œé‡éŸ³å­—ç¬¦è¢«åˆ†è§£ä¸ºåŸºå­—ç¬¦å’Œç»„åˆé‡éŸ³ç¬¦ã€‚ å¯ä»¥é€‰æ‹©æ’åºå™¨æ‰€ä½¿ç”¨çš„èŒƒåŒ–ç¨‹åº¦ï¼šCollator.NO_DECOMPOSITIONè¡¨ç¤ºä¸å¯¹å­—ç¬¦ä¸²åšä»»ä½•èŒƒåŒ–ï¼Œè¿™ä¸ªé€‰é¡¹å¤„ç†è¾ƒå¿«ï¼Œä½†æ˜¯å¯¹äºå¤šå½¢å¼çš„æ–‡æœ¬æ˜¾å¾—ä¸é€‚ç”¨ã€‚é»˜è®¤å€¼Collator.CANONICAL_DECOMPOSITIONä½¿ç”¨èŒƒåŒ–å½¢å¼Dï¼Œè¿™å¯¹äºåŒ…å«é‡éŸ³ä½†ä¸åŒ…å«è¿å­—çš„æ–‡æœ¬æ˜¯éå¸¸æœ‰ç”¨çš„å½¢å¼ï¼›æœ€åæ˜¯ä½¿ç”¨èŒƒåŒ–å½¢å¼KDçš„â€œå®Œå…¨åˆ†è§£â€ã€‚ ![img](https://img-blog.csdnimg.cn/20200104115848811.png) è®©æ’åºå™¨å»å¤šæ¬¡åˆ†è§£ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¾ˆæµªè´¹çš„ã€‚å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²è¦å’Œå…¶ä»–å­—ç¬¦ä¸²è¿›è¡Œå¤šæ¬¡æ¯”è¾ƒï¼Œå¯ä»¥å°†åˆ†è§£ç»“æœä¿å­˜åœ¨ä¸€ä¸ªæ’åºé”®å¯¹è±¡ä¸­ã€‚getCollationKeyæ–¹æ³•è¿”å›ä¸€ä¸ªCollationKeyå¯¹è±¡ï¼Œå¯ä»¥ç”¨å®ƒæ¥è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„ã€æ›´å¿«æ·çš„æ¯”è¾ƒæ“ä½œã€‚

```java
String a = ...;
CollationKey aKey = coll.getCollationKey(a);
if (aKey.compareTo(coll.getCollationKey(b)) == 0) //å¿«é€Ÿæ¯”è¾ƒ
```

æœ€åï¼Œå¯èƒ½ä¸éœ€è¦æ’åºï¼Œä½†ä¹Ÿå¸Œæœ›å°†å­—ç¬¦ä¸²è½¬æˆå®ƒä»¬çš„èŒƒåŒ–å½¢å¼ï¼š

```java
String name = "Ã…ngstrom";
String normalized = Normalizer.normalize(name, Normalizer.Form.NFD);
```

èŒƒåŒ–ååŒ…å«10ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­Ã…æ›¿æ¢æˆäº†AÂ°ã€‚ ä½†è¿™é€šå¸¸å¹¶éç”¨äºå­˜å‚¨æˆ–ä¼ è¾“çš„æœ€ä½³å½¢å¼ã€‚èŒƒåŒ–å½¢å¼Cé¦–å…ˆè¿›è¡Œåˆ†è§£ï¼Œç„¶åå°†é‡éŸ³æŒ‰ç…§æ ‡å‡†åŒ–çš„é¡ºåºç»„åˆã€‚æ ¹æ®W3Cæ ‡å‡†ï¼Œè¿™æ˜¯ç”¨äºäº’è”ç½‘ä¸Šè¿›è¡Œæ•°æ®ä¼ è¾“çš„æ¨èæ¨¡å‹ã€‚

```java
public class CollationTest {
    public static void main(String[] args) {
        JFrame frame = new CollationFrame();
        frame.setTitle("CollationTest");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
}
class CollationFrame extends JFrame {
    private Collator collator = Collator.getInstance(Locale.getDefault());
    private List<String> strings = new ArrayList<>();
    private Collator currentCollator;
    private Locale[] locales;
    private JComboBox<String> localeCombo = new JComboBox<>();
    private JTextField newWords = new JTextField(20);
    private JTextArea sortedWords = new JTextArea(20, 20);
    private JButton addButton = new JButton("Add");
    private EnumCombo<Integer> strengthCombo = new EnumCombo<Integer>(Collator.class, "Primary", "Secondary", "Tertiary", "Identical");
    private EnumCombo<Integer> decompositionCombo = new EnumCombo<Integer>(Collator.class, "Canonical Decomposition", "Full Decomposition", "No Decomposition");

    public CollationFrame() {
        setLayout(new GridBagLayout());
        add(new JLabel("Locale"), new GBC(0, 0).setAnchor(GBC.EAST));
        add(new JLabel("Strength"), new GBC(0, 1).setAnchor(GBC.EAST));
        add(new JLabel("Decomposition"), new GBC(0, 2).setAnchor(GBC.EAST));
        add(addButton, new GBC(0, 3).setAnchor(GBC.EAST));
        add(localeCombo, new GBC(1, 0).setAnchor(GBC.WEST));
        add(strengthCombo, new GBC(1, 1).setAnchor(GBC.WEST));
        add(decompositionCombo, new GBC(1, 2).setAnchor(GBC.WEST));
        add(newWords, new GBC(1, 3).setFill(GBC.HORIZONTAL));
        add(new JScrollPane(sortedWords), new GBC(0, 4, 2, 1).setFill(GBC.BOTH));

        locales = Collator.getAvailableLocales().clone();
        Arrays.sort(locales, (l1, l2) -> collator.compare(l1.getDisplayName(), l2.getDisplayName()));
        for (Locale loc : locales) {
            localeCombo.addItem(loc.getDisplayName());
        }
        localeCombo.setSelectedItem(Locale.getDefault().getDisplayName());

        strings.add("America");
        strings.add("able");
        strings.add("Zulu");
        strings.add("zebra");
        strings.add("\u00C5ngstr\u00F6m");
        strings.add("A\u030angstro\u0308m");
        strings.add("Angstrom");
        strings.add("Able");
        strings.add("office");
        strings.add("o\uFB03ce");
        strings.add("Java\u2122");
        strings.add("JavaTM");
        updateDisplay();

        addButton.addActionListener(event -> {
            strings.add(newWords.getText());
            updateDisplay();
        });

        ActionListener listener = event -> updateDisplay();
        localeCombo.addActionListener(listener);
        strengthCombo.addActionListener(listener);
        decompositionCombo.addActionListener(listener);
        pack();
    }

    public void updateDisplay() {
        Locale currentLocale = locales[localeCombo.getSelectedIndex()];
        localeCombo.setLocale(currentLocale);

        currentCollator = Collator.getInstance(currentLocale);
        currentCollator.setStrength(strengthCombo.getValue());
        currentCollator.setDecomposition(decompositionCombo.getValue());

        Collections.sort(strings, currentCollator);

        sortedWords.setText("");
        for (int i = 0; i < strings.size(); i++) {
            String s = strings.get(i);
            if (i > 0 && currentCollator.compare(s, strings.get(i -1)) == 0) {
                sortedWords.append("= ");
            }
            sortedWords.append(s + "\n");
        }
        pack();
    }
}
```


![img](https://img-blog.csdnimg.cn/20200104140313937.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dzemN5MTk5NTAz,size_16,color_FFFFFF,t_70) =å·è¡¨ç¤ºè¿™ä¸¤ä¸ªè¯è¢«è®¤ä¸ºæ˜¯ç­‰åŒçš„ã€‚ åœ¨ç»„åˆæ¡†ä¸­çš„localeåçš„æ˜¾ç¤ºé¡ºåºï¼Œä½¿ç”¨é»˜è®¤localeçš„æ’åºå™¨è¿›è¡Œæ’åºè€Œäº§ç”Ÿçš„é¡ºåºçš„ã€‚å¦‚æœç”¨ç¾å›½è‹±è¯­localeè¿è¡Œè¿™ä¸ªç¨‹åºï¼Œå³ä½¿é€—å·çš„Unicodeå€¼æ¯”å³æ‹¬å·çš„Unicodeå€¼å¤§ï¼Œâ€œNorwegian(Norway,Nynorsk)â€ä¹Ÿä¼šæ˜¾ç¤ºåœ¨â€œNorwegian(Norway)â€å‰é¢ã€‚


### æ ¼å¼åŒ–æ•°å­—å’Œæ—¥æœŸ

ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„æ¶ˆæ¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæ‹¬å·ä¸­çš„æ•°å­—æ˜¯å ä½ç¬¦ï¼Œå¯ä»¥ç”¨å®é™…çš„åå­—å’Œå€¼æ¥æ›¿æ¢å®ƒä»¬ã€‚ä½¿ç”¨é™æ€æ–¹æ³•MessageFormat.formatå¯ä»¥ç”¨å®é™…çš„å€¼æ¥æ›¿æ¢è¿™äº›å ä½ç¬¦ï¼š

```java
String msg = MessageFormat.format("On {2}, a {0} destroyed {1} houses and caused {3} of damage.",
        "hurricane", 99, new GregorianCalendar(1999, 0, 1).getTime(), 10.0E8);
// On 99-1-1 ä¸Šåˆ12:00, a hurricane destroyed 99 houses and caused 1,000,000,000 of damage.
```

å‡å¦‚ä¸æƒ³éœ€è¦â€œä¸Šåˆ12:00â€ï¼Œè€Œä¸”å°†é€ æˆçš„æŸå¤±é‡æ‰“å°å‡ºè´§å¸å€¼ï¼Œé€šè¿‡å ä½ç¬¦å¯ä»¥æä¾›å¯é€‰æ ¼å¼ï¼š

```java
On {2,date,long}, a {0} destroyed {1} houses and caused {3,number,currency} of damage.
//On 1999å¹´1æœˆ1æ—¥, a hurricane destroyed 99 houses and caused ï¿¥1,000,000,000.00 of damage.
```

ä¸€èˆ¬å ä½ç¬¦ç´¢å¼•åé¢å¯ä»¥è·Ÿä¸€ä¸ªç±»å‹ï¼ˆtypeï¼‰å’Œä¸€ä¸ªé£æ ¼ï¼ˆstyleï¼‰ï¼Œå®ƒä»¬ä¹‹é—´ç”¨é€—å·éš”å¼€ï¼Œç±»å‹å¯ä»¥æ˜¯ï¼šnumberã€timeã€dateã€choiceã€‚ ç±»å‹æ˜¯numberï¼Œé£æ ¼å¯ä»¥æ˜¯integerã€currencyã€percentæˆ–è€…æ˜¯å¯ä»¥æ•°å­—æ ¼å¼æ¨¡å¼ï¼Œå°±åƒ$,##0ã€‚ å¦‚æœç±»å‹æ˜¯timeæˆ–dateï¼Œé£æ ¼å¯ä»¥æ˜¯ï¼šshortã€mediumã€longã€fullï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæ—¥æœŸæ ¼å¼æ¨¡å¼ï¼Œå°±åƒyyyy-MM-ddã€‚ é™æ€çš„MessageFormat.formatæ–¹æ³•ä½¿ç”¨å½“å‰çš„localeå¯¹å€¼è¿›è¡Œæ ¼å¼åŒ–ã€‚è¦æƒ³ç”¨ä»»æ„localeè¿›è¡Œæ ¼å¼åŒ–ï¼š

```java
MessageFormat mf = new MessageFormat("On {2,date,long}, a {0} destroyed {1} houses and caused {3,number,currency} of damage.", Locale.US);
String s = mf.format(new Object[]{"hurricane", 99, new GregorianCalendar(1999, 0, 1).getTime(), 10.0E8});
```

### é€‰æ‹©æ ¼å¼


a {0} destroyedâ€¦ï¼Œå¦‚æœç”¨â€œearthquakeâ€æ¥æ›¿æ¢ä»£è¡¨ç¾éš¾çš„å ä½ç¬¦{0}ï¼Œè¯¥è¯­æ³•å°±ä¸æ­£ç¡®ã€‚ æˆ–è€…{0} destroyedï¼Œå°±åº”è¯¥ç”¨â€œa hurricaneâ€æˆ–â€œan earthquakeâ€æ¥æ›¿æ¢{0}ã€‚ ä½†æ˜¯{1} housesçš„æ›¿æ¢å€¼å¯èƒ½æ˜¯æ•°å­—1ï¼Œæ¶ˆæ¯å°±ä¼šå˜æˆ 1 housesï¼Œå¸Œæœ›æ¶ˆæ¯æ›´å¤Ÿéšå ä½ç¬¦çš„å€¼è€Œå˜åŒ–ï¼Œè¿™æ ·å°±ä¼šæ ¹æ®å…·ä½“çš„å€¼å½¢æˆï¼š no houses, one house, 2 houses choiceæ ¼å¼åŒ–é€‰é¡¹å°±æ˜¯ä¸ºäº†è¿™ä¸ªç›®çš„è€Œè®¾è®¡çš„ã€‚ ä¸€ä¸ªé€‰æ‹©æ ¼å¼ç”±ä¸€ä¸ªåºåˆ—å¯¹æ„æˆçš„ï¼Œæ¯ä¸€ä¸ªå¯¹åŒ…æ‹¬ï¼š 1.ä¸€ä¸ªä¸‹é™ï¼ˆlower limitï¼‰ 2.ä¸€ä¸ªæ ¼å¼å­—ç¬¦ä¸²ï¼ˆformat stringï¼‰ ä¸‹é™å’Œæ ¼å¼å­—ç¬¦ä¸²ç”±ä¸€ä¸ª#ç¬¦å·åˆ†éš”ï¼Œå¯¹ä¸å¯¹ä¹‹é—´ç”±ç¬¦å·|åˆ†éš”ã€‚ ä¾‹å¦‚ï¼Œ{1,choice,0#no houses|1#one house|2#{1} houses} ![img](https://img-blog.csdnimg.cn/20200104154111940.png) å½“æ¶ˆæ¯æ ¼å¼å°†é€‰æ‹©çš„æ ¼å¼åº”ç”¨äºå ä½ç¬¦{1}è€Œä¸”æ›¿æ¢å€¼æ˜¯2æ—¶ï¼Œé‚£ä¹ˆé€‰æ‹©æ ¼å¼ä¼šè¿”å›â€œ{1} housesâ€ã€‚ å¯ä»¥ä½¿ç”¨&lt;ç¬¦å·æ¥è¡¨ç¤ºå¦‚æœæ›¿æ¢å€¼ä¸¥æ ¼å°äºä¸‹é™ï¼Œåˆ™é€‰ä¸­è¿™ä¸ªé€‰æ‹©é¡¹ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨â‰¤ï¼ˆunicodeä¸­çš„ä»£ç æ˜¯\u2264ï¼‰æ¥å®ç°å’Œ#ç›¸åŒçš„æ•ˆæœã€‚å¦‚æœæ„¿æ„çš„è¯ï¼Œç”šè‡³å¯ä»¥å°†ç¬¬ä¸€ä¸ªä¸‹é™çš„å€¼å®šä¹‰ä¸º- âˆï¼ˆunicodeä»£ç æ˜¯- \u221Eï¼‰ã€‚

```java
-âˆ<no houses|0<one house|2â‰¤{1} houses
// æˆ–è€…ä½¿ç”¨Unicodeè½¬ä¹‰å­—ç¬¦
-\u221E<no houses|0<one house|2\u2264{1} houses
```


### æ–‡æœ¬æ–‡ä»¶

å¦‚ä»Šæœ€å¥½æ˜¯ä½¿ç”¨UTF-8æ¥å­˜å‚¨å’ŒåŠ è½½æ–‡æœ¬æ–‡ä»¶ï¼Œä½†æ˜¯éœ€è¦æ“ä½œé—ç•™æ–‡ä»¶ï¼Œå°±è¦çŸ¥é“é—ç•™æ–‡ä»¶çš„å­—ç¬¦ç¼–ç æœºåˆ¶ï¼š

```java
PrintWriter out = new PrintWriter(filename, "Windows-1252");
// è°ƒç”¨ä¸‹é¢æ–¹æ³•å¯ä»¥è·å¾—æœ€ä½³çš„ç¼–ç æœºåˆ¶ï¼ˆå¹³å°çš„ç¼–ç æœºåˆ¶ï¼‰
Charset platformEncoding = Charset.defaultCharset();
```

### è¡Œç»“æŸç¬¦

Windowsä¸­æ¯è¡Œæœ«å°¾æ˜¯\r\nï¼Œè€ŒUNIXåªéœ€è¦ä¸€ä¸ª\nå­—ç¬¦ã€‚å¤§å¤šæ•°Windowsç¨‹åºéƒ½å¯ä»¥å¤„ç†ä¸€ä¸ª\nçš„æƒ…å†µï¼Œä¸€ä¸ªé‡è¦ä¾‹å¤–æ˜¯è®°äº‹æœ¬ã€‚ ä»»ä½•ç”¨printlnæ–¹æ³•å†™å…¥çš„è¡Œéƒ½ä¼šè¢«æ­£ç¡®ç»ˆæ­¢çš„ã€‚å”¯ä¸€çš„é—®é¢˜æ˜¯æ˜¯å¦æ‰“å°äº†åŒ…å«\nå­—ç¬¦çš„è¡Œï¼Œå®ƒä»¬ä¸ä¼šè¢«è‡ªåŠ¨ä¿®æ”¹ä¸ºå¹³å°çš„è¡Œç»“æŸç¬¦ã€‚ä¸åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨\nä¸åŒï¼Œå¯ä»¥ä½¿ç”¨printfå’Œ%næ ¼å¼è¯´æ˜ç¬¦æ¥äº§ç”Ÿå¹³å°ç›¸å…³çš„è¡Œç»“æŸç¬¦ï¼š

```java
System.out.printf("Hello%nWorld%n");
// Windowsäº§ç”ŸHello\r\nWorld\r\n
// å…¶ä»–å¹³å°äº§ç”ŸHello\nWorld\n
// Hello
// World
```

### æ§åˆ¶å°

å¦‚æœé€šè¿‡System.in/System.outæˆ–System.console()ä¸ç”¨æˆ·äº¤äº’ï¼Œé‚£ä¹ˆå°±ä¸å¾—ä¸å¯¹æ§åˆ¶å°ä½¿ç”¨å­—ç¬¦ç¼–ç æœºåˆ¶ä¸CharSet.defaultCharset()æŠ¥å‘Šçš„å¹³å°ç¼–ç æœºåˆ¶æœ‰æ‰€å·®å¼‚çš„å¯èƒ½æ€§ã€‚ Windowsçš„ç¾å›½ç‰ˆæœ¬çš„å‘½ä»¤è¡ŒShellä½¿ç”¨çš„æ˜¯é™ˆæ—§çš„IBM437ç¼–ç æœºåˆ¶ã€‚Charset.defaultCharset()æ–¹æ³•å°†è¿”å›Windows-1252å­—ç¬¦é›†ï¼Œå®ƒä¸IBM437å®Œå…¨ä¸åŒã€‚åœ¨Windows-1252ä¸­æœ‰æ¬§å…ƒç¬¦å·ï¼Œä½†æ˜¯åœ¨IBM437ä¸­æ²¡æœ‰ï¼š

```java
System.out.println("100â‚¬");
// 100?
```

Windowsä¸­å¯ä»¥é€šè¿‡chcpå‘½ä»¤åˆ‡æ¢æ§åˆ¶å°å­—ç¬¦çš„ç¼–ç æœºåˆ¶ï¼š

```java
# åˆ‡æ¢ä¸ºWindos-1252ç¼–ç é¡µ
chcp 1252
# åˆ‡æ¢ä¸ºUTF-8
chcp 65001
```

è¿™å‘½ä»¤ä¸è¶³ä»¥è®©Javaç¨‹åºåœ¨æ§åˆ¶å°ä¸­ä½¿ç”¨UTF-8ï¼Œè¿˜å¿…é¡»ä½¿ç”¨éå®˜æ–¹çš„file.encodingç³»ç»Ÿå±æ€§æ¥è®¾ç½®å¹³å°çš„ç¼–ç æœºåˆ¶ï¼š

```java
java -Dfile.encoding=UTF-8 MyProg
```

### æ—¥å¿—æ–‡ä»¶

java.util.loggingåº“çš„æ—¥å¿—æ¶ˆæ¯ï¼Œä¼šä½¿ç”¨æ§åˆ¶å°ç¼–ç æœºåˆ¶ä¹¦å†™ï¼ˆä¸Šä¸€èŠ‚ï¼‰ã€‚ ä½†æ–‡ä»¶ä¸­çš„æ—¥å¿—æ¶ˆæ¯ä¼šä½¿ç”¨FileHandleræ¥å¤„ç†ï¼Œå®ƒåœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨å¹³å°ç¼–ç æœºåˆ¶ã€‚ ä¿®æ”¹æ—¥å¿—ç®¡ç†å™¨çš„è®¾ç½®ï¼š

```java
java.util.logging.FileHandler.encoding=UTF-8
```

### UTF-8å­—èŠ‚é¡ºåºæ ‡å¿—

UTF-8æ˜¯ä¸€ç§å•å­—èŠ‚ç¼–ç æœºåˆ¶ï¼Œå› æ­¤ä¸éœ€è¦æŒ‡å®šå­—èŠ‚çš„é¡ºåºã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶ä»¥0xEF 0xBB 0xBFï¼ˆU+FEFFçš„UTF-8ç¼–ç ï¼Œå­—èŠ‚é¡ºåºæ ‡å¿—ï¼‰å¼€å¤´ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªå¼ºçƒˆçš„æš—ç¤ºï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶ä½¿ç”¨äº†UTF-8ã€‚æ­£å› ä¸ºè¿™ä¸ªåŸå› ï¼ŒUnicodeæ ‡å‡†é¼“åŠ±è¿™ç§å®è·µæ–¹å¼ã€‚ä»»ä½•è¯»å…¥å™¨éƒ½è¢«è®¤ä¸ºä¼šä¸¢å¼ƒæœ€å‰é¢çš„å­—èŠ‚é¡ºåºæ ‡å¿—ã€‚ è¿˜æœ‰ä¸€ä¸ªç¾ä¸­ä¸è¶³çš„ç‘•ç–µã€‚Oracleçš„Javaå®ç°å¾ˆå›ºæ‰§åœ°å› æ½œåœ¨çš„å…¼å®¹æ€§é—®é¢˜è€Œæ‹’ç»éµå¾ªUnicodeæ ‡å‡†ã€‚åšä¸ºç¨‹åºå‘˜ï¼Œå¿…é¡»å»æ‰§è¡Œå¹³å°å¹¶ä¸ä¼šæ‰§è¡Œçš„æ“ä½œã€‚åœ¨è¯»å…¥æ–‡ä»¶æ—¶ï¼Œå¦‚æœå¼€å¤´ç¢°åˆ°äº†U+FEFFï¼Œé‚£ä¹ˆå°±å¿½ç•¥å®ƒã€‚ JDKçš„å®ç°æ²¡æœ‰éµå¾ªè¿™é¡¹å»ºè®®ï¼Œåœ¨æƒ³javacç¼–è¯‘å™¨ä¼ é€’æœ‰æ•ˆçš„ä»¥å­—èŠ‚é¡ºåºæ ‡å¿—å¼€å¤´çš„UTF-8æºæ–‡ä»¶æ—¶ï¼Œç¼–è¯‘ä¼šä»¥äº§ç”Ÿé”™è¯¯æ¶ˆæ¯â€œillegal character:\65279â€è€Œå¤±è´¥ã€‚

### æºæ–‡ä»¶çš„å­—ç¬¦ç¼–ç 

ä½œä¸ºç¨‹åºå‘˜ï¼Œè¦ç‰¢è®°éœ€è¦ä¸Javaç¼–è¯‘å™¨äº¤äº’ï¼Œè¿™ç§äº¤äº’éœ€è¦é€šè¿‡æœ¬åœ°ç³»ç»Ÿçš„å·¥å…·å®Œæˆã€‚ æ¯”å¦‚ä½¿ç”¨ä¸­æ–‡ç‰ˆçš„è®°äº‹æœ¬å†™Javaæºä»£ç æ–‡ä»¶ã€‚ä½†è¿™æ ·å†™å‡ºæ¥çš„æºç ä¸æ˜¯éšå¤„å¯ç”¨çš„ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨çš„æ˜¯æœ¬åœ°çš„å­—ç¬¦ç¼–ç ï¼ˆGBæˆ–Big5ï¼‰ã€‚åªæœ‰ç¼–è¯‘åçš„classæ–‡ä»¶æ‰èƒ½éšå¤„ä½¿ç”¨ã€‚å› ä¸ºå®ƒä»¬ä¼šè‡ªåŠ¨ä½¿ç”¨â€œmodifiedUTF-8â€ç¼–ç æ¥å¤„ç†æ ‡è¯†ç¬¦å’Œå­—ç¬¦ä¸²ã€‚è¿™æ„å‘³ç€å³ä½¿åœ¨ç¨‹åºç¼–è¯‘å’Œè¿è¡Œæ—¶ï¼Œä¾ç„¶æœ‰3ä¸­å­—ç¬¦ç¼–ç å‚ä¸å…¶ä¸­ï¼š 1.æºæ–‡ä»¶ï¼šæœ¬åœ°ç¼–ç  2.ç±»æ–‡ä»¶ï¼šmodified UTF-8 3.è™šæ‹Ÿæœºï¼šUTF-16 å¯ä»¥ç”¨-encodingæ ‡è®°æ¥è®¾å®šæºæ–‡ä»¶çš„å­—ç¬¦ç¼–ç ï¼š

```java
javac -encoding UTF-8 Myfile.java
```

ä¸ºäº†ä½¿æºæ–‡ä»¶åˆ°å¤„ä½¿ç”¨ï¼Œå¿…é¡»ä½¿ç”¨æ™®éçš„ASCIIç¼–ç ã€‚å°±æ˜¯è¯´ï¼Œéœ€è¦å°†æ‰€æœ‰éASCIIå­—ç¬¦è½¬æ¢æˆç­‰ä»·çš„Unicodeç¼–ç ã€‚æ¯”å¦‚ï¼Œä¸è¦ä½¿ç”¨å­—ç¬¦â€œHÃ¤userâ€ï¼Œåº”è¯¥ä½¿ç”¨â€œH\u0084userâ€ã€‚JDKåŒ…å«äº†ä¸€ä¸ªnative2asciiï¼Œå¯ä»¥ç”¨å®ƒå°†æœ¬åœ°å­—ç¬¦ç¼–ç è½¬æ¢æˆæ™®é€šçš„ASCIIã€‚è¿™ä¸ªå·¥å…·ç›´æ¥å°†æ¯ä¸€ä¸ªéASCIIå­—ç¬¦æ›¿æ¢ä¸ºä¸€ä¸ª\uåŠ å››ä½åå…­è¿›åˆ¶çš„Unicodeå€¼ã€‚ä½¿ç”¨native2asciiæ—¶ï¼Œéœ€è¦æä¾›è¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶çš„åå­—ï¼š

```java
native2ascii Myfile.java Myfile.temp
```

å¯ä»¥ä½¿ç”¨-reverseè¿›è¡Œé€†å‘è½¬æ¢ï¼š

```java
native2ascii -reverse Myfile.temp Myfile.java
```

å¯ä»¥ä½¿ç”¨-encodingé€‰é¡¹çŸ¥é“å¦ä¸€ç§ç¼–ç ï¼š

```java
native2ascii -encoding UTF-8 Myfile.java Myfile.temp
```


ä¸€ä¸ªæœ¬åœ°åŒ–ç¨‹åºï¼Œä¼šæœ‰å¤§é‡çš„æ¶ˆæ¯å­—ç¬¦ä¸²ã€æŒ‰é’®æ ‡ç­¾å’Œå…¶ä»–çš„éœ€è¦è¢«ç¿»è¯‘ï¼Œä¸ºäº†èƒ½å¤Ÿçµæ´»åœ°å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼Œä¼šå¸Œæœ›åœ¨å¤–éƒ¨å®šä¹‰æ¶ˆæ¯å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç§°ä¹‹ä¸ºèµ„æºï¼ˆresourceï¼‰ã€‚ç¿»è¯‘äººå‘˜ä¸éœ€è¦æ¥è§¦ç¨‹åºæºä»£ç å°±å¯ä»¥ç¼–è¾‘èµ„æºæ–‡ä»¶ã€‚ åœ¨Javaä¸­ï¼Œä½¿ç”¨å±æ€§æ–‡ä»¶æ¥è®¾å®šå­—ç¬¦ä¸²èµ„æºï¼Œå¹¶ä¸ºå…¶ä»–ç±»å‹çš„èµ„æºå®ç°ç›¸åº”çš„ç±»ã€‚

### å®šä½èµ„æºåŒ…

æœ¬åœ°åŒ–ä¸€ä¸ªåº”ç”¨æ—¶ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šèµ„æºåŒ…ï¼ˆresource bundleï¼‰ã€‚ ç»Ÿä¸€çš„å‘½åè§„åˆ™ï¼Œä½¿ç”¨ åŒ…å_è¯­è¨€_å›½å®¶ï¼ˆåŒ…å_de_DEï¼‰ æ¥å‘½åæ‰€æœ‰å’Œå›½å®¶ç›¸å…³çš„èµ„æºã€‚ ä½¿ç”¨ åŒ…å_è¯­è¨€ï¼ˆåŒ…å_deï¼‰ æ¥å‘½åæ‰€æœ‰å’Œå›½å®¶ç›¸å…³çš„èµ„æºã€‚ä½œä¸ºåå¤‡ï¼Œå¯ä»¥æŠŠé»˜è®¤èµ„æºæ”¾åœ¨ä¸€ä¸ªæ²¡æœ‰åç¼€çš„æ–‡ä»¶ä¸­ã€‚

å¯ä»¥ä½¿ç”¨ä¸‹é¢ä»£ç åŠ è½½ä¸€ä¸ªåŒ…ï¼š

```java
ResourceBundle currentResources = ResourceBundle.getBundle(bundleName, currentLocale);
```

getBundleæ–¹æ³•è¯•å›¾åŠ è½½åŒ¹é…å½“å‰localeå®šä¹‰çš„è¯­è¨€å’Œå›½å®¶çš„åŒ…ã€‚å¦‚æœå¤±è´¥ï¼Œé€šè¿‡ä¾æ¬¡æ”¾å¼ƒå›½å®¶å’Œè¯­è¨€æ¥ç»§ç»­æŸ¥æ‰¾ï¼Œç„¶ååŒæ ·çš„æŸ¥æ‰¾è¢«åº”ç”¨äºé»˜è®¤çš„localeï¼Œæœ€åï¼Œå¦‚æœè¿˜ä¸è¡Œå°±å»æŸ¥çœ‹é»˜è®¤çš„åŒ…æ–‡ä»¶ï¼Œå¦‚æœå¤±è´¥ï¼Œå°±æŠ›å‡ºä¸€ä¸ªMissingResourceExceptionã€‚ ä¸€æ—¦getBundleæ–¹æ³•å®šä½äº†ä¸€ä¸ªåŒ…ã€‚æ¯”å¦‚ï¼ŒåŒ…å_de_DEï¼Œå®ƒè¿˜ä¼šç»§ç»­æŸ¥æ‰¾ åŒ…å_de å’Œ åŒ…å è¿™ä¸¤ä¸ªåŒ…ã€‚å¦‚æœè¿™äº›åŒ…ä¹Ÿå­˜åœ¨ï¼Œå®ƒä»¬åœ¨èµ„æºå±‚æ¬¡ä¸­å°±æˆä¸ºäº† åŒ…å_de_DEçš„çˆ¶åŒ…ã€‚ä»¥åè¦æŸ¥æ‰¾ä¸€ä¸ªèµ„æºæ—¶ï¼Œå¦‚æœå½“é’±åŒ…æ²¡æœ‰ï¼Œå°±ä¼šå»æŸ¥æ‰¾çˆ¶åŒ…ã€‚

### å±æ€§æ–‡ä»¶

MyProgramStrings.propertiesï¼Œæ¯è¡Œå­˜æ”¾ä¸€ä¸ªé”®-å€¼å¯¹çš„æ–‡æœ¬æ–‡ä»¶:

```java
computeButton=Rechnen
colorName=black
defaultPaperSize=210Ã—297
```

ç„¶åï¼š MyProgramStrings.properties MyProgramStrings_en.properties MyProgramStrings_ch.properties ç„¶åç›´æ¥åŠ è½½åŒ…ï¼š

```java
ResourceBundle currentResources = ResourceBundle.getBundle("MyProgramStrings", Locale.getDefault());
// æŸ¥æ‰¾å…·ä½“å­—ç¬¦ä¸²å­—ç¬¦ä¸²
String conputeButtonLabel = currentResources.getString("computeButton");
```

å­˜å‚¨å±æ€§çš„æ–‡ä»¶éƒ½æ˜¯ASCIIæ–‡ä»¶ã€‚å¦‚æœéœ€è¦å°†Unicodeå­—ç¬¦æ”¾åˆ°å±æ€§æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆè¯·ç”¨\uxxxxç¼–ç æ–¹å¼è¿›è¡Œç¼–ç ã€‚æ¯”å¦‚â€œcolorName=GrÃ¼nâ€ï¼Œå¯ä»¥ä½¿ç”¨â€œcolorName=Gr\uooFCnâ€ã€‚å¯ä»¥ä½¿ç”¨native2asciiå·¥å…·æ¥äº§ç”Ÿè¿™äº›æ–‡ä»¶ã€‚

### åŒ…ç±»

ä¸ºäº†æä¾›å­—ç¬¦ä¸²ä»¥å¤–çš„èµ„æºï¼Œéœ€è¦å®šä¹‰ç±»ï¼Œå®ƒå¿…é¡»æ‰©å±•è‡ªResourceBundleç±»ã€‚åº”è¯¥ä½¿ç”¨æ ‡å‡†çš„å‘½åè§„åˆ™æ¥å‘½åç±»ï¼š MyProgramResources.java MyProgramResources_en.java MyProgramResources_ch.java å¯ä»¥ä½¿ç”¨ä¸åŠ è½½å±æ€§æ–‡ä»¶ç›¸åŒçš„getBundleæ–¹æ³•æ¥åŠ è½½è¿™ä¸ªç±»ï¼š

```java
ResourceBundle bundle = ResourceBundle.getBundle("MyProgramResources", Locale.getDefault());
```

æ¯ä¸€ä¸ªèµ„æºåŒ…ç±»éƒ½å®ç°ä¸€ä¸ªæŸ¥è¯¢è¡¨ï¼Œéœ€è¦ä¸ºæ¯ä¸€ä¸ªæƒ³å®šä½çš„è®¾ç½®éƒ½æä¾›ä¸€ä¸ªå…³é”®å­—å­—ç¬¦ä¸²ï¼Œä½¿ç”¨è¿™ä¸ªå­—ç¬¦ä¸²æ¥æå–ç›¸åº”çš„è®¾ç½®ï¼š

```java
Color backgroudColor = (Color) bundle.getObject("backgroundColor");
double[] paperSize = (double[]) bundle.getObject("defaultPaperSize");
```

å®ç°èµ„æºåŒ…ç±»çš„æœ€ç®€å•æ–¹æ³•æ˜¯ç»§æ‰¿ListResourceBundleç±»ã€‚ListResourceBundleè®©ä½ æŠŠæ‰€æœ‰èµ„æºéƒ½æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡æ•°ç»„ä¸­å¹¶æä¾›æŸ¥æ‰¾åŠŸèƒ½ï¼š bunleName_language_country.java

```java
public class MyProgramResources_de extends ListResourceBundle {
    private static final Object[][] contents = {
            {"backgroundColor", Color.black},
            {"defaultPaperSize", new double[]{210, 297}}
    };
    @Override
    protected Object[][] getContents() {
        return contents;
    }
}
public class MyProgramResources_en_US extends ListResourceBundle {
    private static final Object[][] contents = {
            {"backgroundColor", Color.blue},
            {"defaultPaperSize", new double[]{216, 279}}
    };
    @Override
    protected Object[][] getContents() {
        return contents;
    }
}
```

æˆ–è€…èµ„æºç±»åŒ…æ‰©å±•ResourceBundleç±»ã€‚ç„¶åéœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯æšä¸¾æ‰€æœ‰é”®ï¼ŒäºŒæ˜¯ç”¨ç»™å®šçš„é”®æŸ¥æ‰¾ç›¸åº”çš„å€¼ï¼š Object handleGetObject(String key) Enumeration&lt; String &gt; getKeys() ResourceBundleç±»çš„getObjecyæ–¹æ³•ä¼šè°ƒç”¨handleGetObjectæ–¹æ³•ã€‚

